
<!DOCTYPE html>

<html lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æœ€å¸¸ç”¨çš„ç”¨æ³•(å¾…æ›´) &#8212; ck-book 0.1 æ–‡æ¡£</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=84ace793992934648b4de8eed757e5a2" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../_static/default.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/tabs.js"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script kind="utterances">

    var commentsRunWhenDOMLoaded = cb => {
    if (document.readyState != 'loading') {
        cb()
    } else if (document.addEventListener) {
        document.addEventListener('DOMContentLoaded', cb)
    } else {
        document.attachEvent('onreadystatechange', function() {
        if (document.readyState == 'complete') cb()
        })
    }
}

var addUtterances = () => {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "https://utteranc.es/client.js";
    script.async = "async";

    script.setAttribute("repo", "xinetzone/ck-book");
    script.setAttribute("issue-term", "pathname");
    script.setAttribute("theme", "github-light");
    script.setAttribute("label", "ğŸ’¬ comment");
    script.setAttribute("crossorigin", "anonymous");

    sections = document.querySelectorAll("div.section");
    if (sections !== null) {
        section = sections[sections.length-1];
        section.appendChild(script);
    }
}
commentsRunWhenDOMLoaded(addUtterances);
</script>
    <script src="../_static/translations.js"></script>
    <script src="../_static/sphinx-book-theme.9d8b4a8b9bb19db25eeaddc40d639ba2.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".cell"
        const thebe_selector_input = ".cell_input div.highlight"
        const thebe_selector_output = ".cell_output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <link rel="shortcut icon" href="../_static/page-logo.jfif"/>
    <link rel="index" title="ç´¢å¼•" href="../genindex.html" />
    <link rel="search" title="æœç´¢" href="../search.html" />
    <link rel="next" title="CK CLI å’Œ API" href="commands.html" />
    <link rel="prev" title="å°è¯• CK" href="first-steps.html" /> 
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="zh_CN">
    

    <!-- Google Analytics -->
     
<link
  rel="alternate"
  type="application/atom+xml"
  href="../posts/atom.xml"
  title="Blog"
/>
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<div class="col-12 col-md-3 bd-sidebar site-navigation " id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.jpg" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">ck-book 0.1 æ–‡æ¡£</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="æœç´¢æ–‡æ¡£..." aria-label="æœç´¢æ–‡æ¡£..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   å¯åŠ¨é¡¹ç›®
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="intro.html">
     ç®€ä»‹
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="install.html">
     å®‰è£…
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="first-steps.html">
     å°è¯• CK
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     æœ€å¸¸ç”¨çš„ç”¨æ³•(å¾…æ›´)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="commands.html">
     CK CLI å’Œ API
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="specs.html">
     CK specs
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="portable-workflows.html">
     è‡ªåŠ¨åŒ– ML&amp;systems R&amp;D
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../about/index.html">
   å…³äº
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../CODE_OF_CONDUCT.html">
     è¡Œä¸ºå‡†åˆ™
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../CONTRIBUTING.html">
     è´¡çŒ®
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../SECURITY.html">
     å®‰å…¨ç­–ç•¥
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../CHANGELOG.html">
     å˜æ›´æ—¥å¿—
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  <div>
ç‰ˆæƒæ‰€æœ‰Â Â©Â 2021 <a href="https://xinetzone.github.io/">xinetzone</a></div>
<div>ç”± <a href="https://ebp.jupyterbook.org/">EBP</a> æä¾›æŠ€æœ¯æ”¯æŒ</div>

</div>

</div>


          


          
<!-- This is an invisible pixel that we watch to see if we've scrolled. -->
<div class="sbt-scroll-pixel-helper"></div>
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            <div class="topbar-left">
                
                <label class="nav-toggle-button" for="__navigation">
                    <div class="visually-hidden">åˆ‡æ¢å¯¼èˆª</div>
                    <i class="fas fa-bars"></i>
                </label>
                
            </div>
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="ä¸‹è½½æ­¤é¡µé¢"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/start/typical-usage.md.txt"><button type="button"
                class="btn btn-secondary topbarbtn" title="ä¸‹è½½æºæ–‡ä»¶" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="åˆ—å°æˆPDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/xinetzone/ck-book"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="æºåº“"><i
                    class="fab fa-github"></i>èµ„æ–™åº“</button></a>
        <a class="issues-button"
            href="https://github.com/xinetzone/ck-book/issues/new?title=Issue%20on%20page%20%2Fstart/typical-usage.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="æ‰“å¼€ä¸€ä¸ªé—®é¢˜"><i class="fas fa-lightbulb"></i>å…¬å¼€çš„é—®é¢˜</button></a>
        <a class="edit-button" href="https://github.com/xinetzone/ck-book/edit/main/docs/start/typical-usage.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="ç¼–è¾‘è¿™ä¸ªé¡µé¢"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="å…¨å±æ¨¡å¼"
        title="å…¨å±æ¨¡å¼"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> å¯¼èˆª
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ck">
   æ–°å»º CK å­˜å‚¨åº“
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id2">
     æ·»åŠ ä¾èµ–
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id3">
     æ·»åŠ æ–°çš„ç¨‹åºå·¥ä½œæµ
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id4">
     æ›´æ–°ç¨‹åºæºä»£ç 
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id5">
   æ›´æ–°è½¯ä»¶ä¾èµ–
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id6">
   é‡ç”¨æˆ–æ·»åŠ åŸºæœ¬æ•°æ®é›†
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id7">
   æ·»åŠ æ–°çš„ CK è½¯ä»¶æ£€æµ‹æ’ä»¶
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#add-new-ck-packages">
   Add new CK packages
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pack-ck-repository">
   Pack CK repository
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#prepare-ck-repository-for-digital-libraries">
   Prepare CK repository for Digital Libraries
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#prepare-a-docker-container-with-ck-workflows">
   Prepare a Docker container with CK workflows
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-more-complex-workflows">
   Create more complex workflows
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-shell-scripts">
     Using shell scripts
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-ck-modules">
     Using CK modules
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#generate-reproducible-and-interactive-articles">
   Generate reproducible and interactive articles
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#publish-ck-repositories-workflows-and-components">
   Publish CK repositories, workflows, and components
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#contact-the-ck-community">
   Contact the CK community
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>æœ€å¸¸ç”¨çš„ç”¨æ³•(å¾…æ›´)</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> å¯¼èˆª </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ck">
   æ–°å»º CK å­˜å‚¨åº“
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id2">
     æ·»åŠ ä¾èµ–
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id3">
     æ·»åŠ æ–°çš„ç¨‹åºå·¥ä½œæµ
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id4">
     æ›´æ–°ç¨‹åºæºä»£ç 
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id5">
   æ›´æ–°è½¯ä»¶ä¾èµ–
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id6">
   é‡ç”¨æˆ–æ·»åŠ åŸºæœ¬æ•°æ®é›†
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id7">
   æ·»åŠ æ–°çš„ CK è½¯ä»¶æ£€æµ‹æ’ä»¶
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#add-new-ck-packages">
   Add new CK packages
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pack-ck-repository">
   Pack CK repository
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#prepare-ck-repository-for-digital-libraries">
   Prepare CK repository for Digital Libraries
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#prepare-a-docker-container-with-ck-workflows">
   Prepare a Docker container with CK workflows
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-more-complex-workflows">
   Create more complex workflows
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-shell-scripts">
     Using shell scripts
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-ck-modules">
     Using CK modules
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#generate-reproducible-and-interactive-articles">
   Generate reproducible and interactive articles
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#publish-ck-repositories-workflows-and-components">
   Publish CK repositories, workflows, and components
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#contact-the-ck-community">
   Contact the CK community
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                 <div class="tex2jax_ignore mathjax_ignore section" id="id1">
<h1>æœ€å¸¸ç”¨çš„ç”¨æ³•(å¾…æ›´)<a class="headerlink" href="#id1" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h1>
<p>è¿™é‡Œæè¿°å¦‚ä½•ä½¿ç”¨æ–°çš„ï¼ˆç©ºçš„ï¼‰CK åº“æˆ–ç°æœ‰çš„ CK åº“åˆ›å»ºå’Œå…±äº«æ–°çš„ CK ç¨‹åºå·¥ä½œæµã€è½¯ä»¶æ£€æµ‹æ’ä»¶å’ŒåŒ…ã€‚å¯ç§»æ¤çš„ CK ç¨‹åºå·¥ä½œæµæ˜¯æœ€å¸¸ç”¨çš„ CK è‡ªåŠ¨åŒ–ï¼Œç”¨äºç¼–è¯‘ã€è¿è¡Œã€éªŒè¯å’Œæ¯”è¾ƒä¸åŒç¼–è¯‘å™¨ã€åº“ã€æ¨¡å‹ã€æ•°æ®é›†å’Œå¹³å°ä¸Šçš„ä¸åŒç®—æ³•å’ŒåŸºå‡†ã€‚</p>
<p>æˆ‘ä»¬å¼ºçƒˆå»ºè®®æ‚¨å…ˆæŸ¥çœ‹ <a class="reference external" href="https://ck.readthedocs.io/en/latest/src/introduction.html">CK ä»‹ç»</a> å’Œ<a class="reference external" href="https://ck.readthedocs.io/en/latest/src/first-steps.html">å…¥é—¨æŒ‡å—</a>ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥æ£€æŸ¥ä»¥ä¸‹çœŸå®ä¸–ç•Œçš„ç”¨ä¾‹ï¼Œå®ƒä»¬æ˜¯åŸºäºå¯ç§»æ¤å’Œå¯å®šåˆ¶çš„ CK å·¥ä½œæµç¨‹ï¼š</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ctuning/ck-mlperf">MLPerfâ„¢ benchmark automation</a></p></li>
<li><p><a class="reference external" href="https://cKnowledge.org/request">Reproducible ACM REQUEST tournaments</a> to co-design Pareto-efficient AI/ML/SW/HW stacks</p></li>
<li><p><a class="reference external" href="https://cKnowledge.org/quantum">Reproducible quantum hackathons</a></p></li>
<li><p>Student Cluster Competition automation at SuperComputing: <a class="reference external" href="https://github.com/ctuning/ck-scc18">SCC18</a>, <a class="reference external" href="https://github.com/ctuning/ck-scc">general SCC</a></p></li>
<li><p><a class="reference external" href="https://cKnowledge.org/rpi-crowd-tuning">reproducible and interactive paper for ML-based compilers</a></p></li>
</ul>
<div class="section" id="ck">
<h2>æ–°å»º CK å­˜å‚¨åº“<a class="headerlink" href="#ck" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>åœ¨å½“å‰ç›®å½•ä¸­åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ CK å­˜å‚¨åº“ï¼ˆå¯ä»¥æ˜¯ç°æœ‰çš„ Git repoï¼‰</p>
<p>å¦‚æœæ‚¨è®¡åˆ’å¯¹ <a class="reference external" href="http://cknowledge.io/repos">å·²æœ‰çš„ CK å­˜å‚¨åº“</a> è¿›è¡Œè´¡çŒ®ï¼Œåˆ™å¯ä»¥è·³è¿‡è¿™ä¸€å°èŠ‚ã€‚å¦åˆ™ï¼Œæ‚¨éœ€è¦æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªæ–°çš„ CK å­˜å‚¨åº“ã€‚</p>
<p>ä½ éœ€è¦é€‰æ‹©ä¸€äº›ç”¨æˆ·å‹å¥½çš„åç§°ï¼Œä¾‹å¦‚ â€œmy-new-repoâ€ï¼Œç„¶ååœ¨å‘½ä»¤è¡Œï¼ˆLinuxã€Windows å’Œ MacOSï¼‰ä¸­åˆå§‹åŒ–å½“å‰ç›®å½•ä¸‹çš„ CK åº“ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck init repo:my-new-repo
</pre></div>
</div>
<p>å¦‚æœå½“å‰ç›®å½•å±äºä¸€ä¸ª Git repo, CK ä¼šè‡ªåŠ¨æ£€æµ‹åˆ°è¯¥ URLã€‚å¦åˆ™ï¼Œä½ ä¹Ÿéœ€è¦åœ¨ CLI ä¸­æŒ‡å®šå®ƒï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck init repo:my-new-repo --url<span class="o">={</span>Git URL<span class="o">}</span>
</pre></div>
</div>
<p>ç„¶åï¼Œä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ‰¾åˆ° CK åˆ›å»ºçš„è¿™ä¸ªè™šæ‹Ÿ CK åº“çš„ä½ç½®ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck where repo:my-new-repo
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">å¤‡æ³¨</p>
<p>å¦‚æœä½ æƒ³ä¸ç¤¾åŒºæˆ–å·¥ä½œç»„å…±äº«ä½ çš„å­˜å‚¨åº“ï¼Œä»¥é‡ç”¨è‡ªåŠ¨åŒ–å’Œç»„ä»¶ï¼Œä½ å¿…é¡»åœ¨ <a class="reference external" href="http://www.github.com/">GitHub</a>, <a class="reference external" href="http://gitlab.com/">GitLab</a>, <a class="reference external" href="http://gitlab.com/">BitBucket</a> æˆ–ä»»ä½•å…¶ä»–åŸºäº git çš„æœåŠ¡åˆ›å»ºä¸€ä¸ªç©ºçš„å­˜å‚¨åº“ã€‚å‡è®¾æ‚¨åœ¨ https://github.com/my_name åˆ›å»ºäº† my-new-repoã€‚</p>
<p>ç„¶åï¼Œä½ å¯ä»¥ä½¿ç”¨ CK æå–è¿™ä¸ªå­˜å‚¨åº“ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck pull repo --url<span class="o">=</span>https://github.com/my_name/my-new-repo
</pre></div>
</div>
<p>ç„¶å CK ä¼šåœ¨æœ¬åœ°åˆ›å»º <code class="docutils literal notranslate"><span class="pre">my_name_repo</span></code> å­˜å‚¨åº“ï¼Œæ·»åŠ é»˜è®¤çš„å…ƒä¿¡æ¯ï¼Œå¹¶å°†å…¶æ ‡è®°ä¸ºå…±äº«å­˜å‚¨åº“ï¼ˆåŠè‡ªåŠ¨åŒæ­¥å†…å®¹ä¸ç›¸å…³çš„ Git å­˜å‚¨åº“ï¼‰ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck where repo:my-new-repo
</pre></div>
</div>
</div>
<p>ä¾‹å¦‚ï¼Œä½ å¯ä»¥ç¨åæäº¤å¹¶å°†è¿™ä¸ªä»“åº“çš„æ›´æ–°æ¨é€å› Gitï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck push repo:my-new-repo
</pre></div>
</div>
<p>å»ºè®®ä½ åœ¨ä» GitHub æ‹‰å‡ºä½ çš„è™šæ‹Ÿåº“åç«‹å³è¿›è¡Œç¬¬ä¸€æ¬¡æäº¤ï¼Œä»¥è‡ªåŠ¨æ¨é€ <code class="docutils literal notranslate"> <span class="pre">.ckr.json</span></code> æ–‡ä»¶ä¸ä¸€äº›å†…éƒ¨å…ƒä¿¡æ¯å’Œå”¯ä¸€ ID è¿”å›åˆ° GitHubã€‚</p>
<p>è¯·æ³¨æ„ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ Git å‘½ä»¤ç›´æ¥ä» CK å­˜å‚¨åº“ç›®å½•æäº¤å’Œæ¨é€æ‰€æœ‰æ›´æ–°ï¼ä¸è¦å¿˜è®°æäº¤éšè—çš„ CK ç›®å½• <code class="docutils literal notranslate"><span class="pre">*.cm/**</span></code>ï¼</p>
<p>ç°åœ¨å¯ä»¥ä½¿ç”¨æ–°åˆ›å»ºçš„å­˜å‚¨åº“ä½œä¸ºæ•°æ®åº“æ¥æ·»åŠ ã€å…±äº«å’Œé‡ç”¨æ–°ç»„ä»¶äº†ã€‚æ‚¨ä¹Ÿå¯ä»¥ä¸æ‚¨çš„åŒäº‹æˆ– <a class="reference external" href="https://ctuning.org/ae">å·¥ä»¶è¯„ä¼°å§”å‘˜ä¼š</a> å…±äº«æ­¤å­˜å‚¨åº“ï¼Œä»¥ç»Ÿä¸€çš„æ–¹å¼æµ‹è¯•æ‚¨çš„ç»„ä»¶å’Œå·¥ä½œæµï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck pull repo --url<span class="o">=</span>https://github.com/my_name/my-new-repo
</pre></div>
</div>
<div class="section" id="id2">
<h3>æ·»åŠ ä¾èµ–<a class="headerlink" href="#id2" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>æ·»åŠ å¯¹å…¶ä»–å­˜å‚¨åº“çš„ä¾èµ–ï¼Œä»¥é‡ç”¨è‡ªåŠ¨åŒ–æ“ä½œå’Œç»„ä»¶ã€‚</p>
<p>å½“ä½ æƒ³é‡ç”¨ç°æœ‰çš„ CK è‡ªåŠ¨åŒ–æ“ä½œå’Œå…¶ä»–å­˜å‚¨åº“çš„ç»„ä»¶æ—¶ï¼Œä½ éœ€è¦åœ¨ä½ çš„æ ¹ CK å­˜å‚¨åº“çš„ <code class="docutils literal notranslate"><span class="pre">.ckr.json</span></code> æ–‡ä»¶ä¸­æ·»åŠ å¯¹æ‰€æœ‰è¿™äº›å­˜å‚¨åº“çš„ä¾èµ–ï¼š</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
  <span class="s2">&quot;dict&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="o">...</span>
    <span class="s2">&quot;repo_deps&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">&quot;repo_uoa&quot;</span><span class="p">:</span> <span class="s2">&quot;ck-env&quot;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;repo_uoa&quot;</span><span class="p">:</span> <span class="s2">&quot;ck-autotuning&quot;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;repo_uoa&quot;</span><span class="p">:</span> <span class="s2">&quot;ck-mlperf&quot;</span><span class="p">,</span>
        <span class="s2">&quot;repo_url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://github.com/ctuning/ck-mlperf&quot;</span>
      <span class="p">}</span>
    <span class="p">]</span> 
  <span class="p">}</span>
</pre></div>
</div>
<p>æ¯å½“æœ‰äººæ‹‰å‡ºä½ çš„ä»“åº“ï¼ŒCK å°†è‡ªåŠ¨æ‹‰å‡ºæ‰€æœ‰å…¶ä»–éœ€è¦çš„ CK ä»“åº“ä¸è‡ªåŠ¨åŒ–æ“ä½œï¼</p>
</div>
<div class="section" id="id3">
<h3>æ·»åŠ æ–°çš„ç¨‹åºå·¥ä½œæµ<a class="headerlink" href="#id3" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>ç°åœ¨ï¼Œæ‚¨å¯ä»¥æ·»åŠ æ–°çš„ CK å·¥ä½œæµï¼Œä»¥ç»Ÿä¸€çš„æ–¹å¼ç¼–è¯‘å’Œè¿è¡Œä¸€äº›ç®—æ³•æˆ–åŸºå‡†ã€‚</p>
<p>å› ä¸º CK çš„æ¦‚å¿µæ˜¯å…³äºç”¨ç±»ä¼¼ç»´åŸºç™¾ç§‘çš„é€šç”¨ API é‡ç”¨å’Œæ‰©å±•ç°æœ‰ç»„ä»¶ï¼Œæˆ‘ä»¬å»ºè®®ä½ çœ‹çœ‹å…±äº« CK ç¨‹åºçš„<a class="reference external" href="https://cknowledge.io/programs">ç´¢å¼•</a>ï¼Œä»¥é˜²æœ‰äººå·²ç»ä¸ºç›¸åŒæˆ–ç±»ä¼¼çš„ç¨‹åºå…±äº«äº† CK å·¥ä½œæµï¼</p>
<p>å¦‚æœä½ å‘ç°äº†ä¸€ä¸ªç±»ä¼¼çš„ç¨‹åºï¼Œä¾‹å¦‚â€œå›¾åƒè§’ç‚¹æ£€æµ‹â€ï¼Œä½ å¯ä»¥åœ¨æ–°çš„ CK åº“ä¸­åˆ›å»ºä¸€ä¸ªè¯¥ç¨‹åºçš„å·¥ä½œå‰¯æœ¬ï¼Œä»¥ä¾¿è¿›ä¸€æ­¥ç¼–è¾‘ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck pull repo:ctuning-programs 
ck cp program:image-corner-detection my-new-repo:program:my-copy-of-image-corner-detection
</pre></div>
</div>
<p>ç°åœ¨ä½ åœ¨ä½ çš„æ–°å­˜å‚¨åº“ä¸­æœ‰äº†ä¸€ä¸ª CK â€œå›¾åƒ-è§’ç‚¹æ£€æµ‹â€ç¨‹åºæ¡ç›®çš„å·¥ä½œå‰¯æœ¬ï¼Œå®ƒåŒ…å«äº†å…³äºå¦‚ä½•ç¼–è¯‘å’Œè¿è¡Œè¿™ä¸ªç¨‹åºçš„æºä»£ç å’Œ CK å…ƒä¿¡æ¯ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck compile program:my-copy-of-image-corner-detection --speed
ck run program:my-copy-of-image-corner-detection
</pre></div>
</div>
<p>ä½ å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­æ‰¾åˆ°å¹¶æ¢ç´¢æ–°çš„ CK æ¡ç›®ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck find program:my-copy-of-image-corner-detection
</pre></div>
</div>
<p>ä½ ä¼šåœ¨è¿™ä¸ªç›®å½•ä¸­çœ‹åˆ°ä»¥ä¸‹æ–‡ä»¶ï¼š</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.cm/desc.json</span></code>ï¼šæ‰€æœ‰è‡ªåŠ¨åŒ–æ“ä½œä¸­æ‰€æœ‰ I/O ç±»å‹çš„æè¿°ï¼ˆé»˜è®¤ä¸ºç©ºï¼šæˆ‘ä»¬ç°åœ¨å¯ä»¥è·³è¿‡å®ƒï¼‰</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.cm/info.json</span></code>ï¼šæ­¤æ¡ç›®çš„æ¥æºï¼ˆåˆ›å»ºæ—¥æœŸã€ä½œè€…ã€è®¸å¯è¯ç­‰ï¼‰</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.cm/meta.json</span></code>ï¼š<strong>å…³äºå¦‚ä½•ç¼–è¯‘ã€è¿è¡Œå’ŒéªŒè¯è¿™ä¸ªç¨‹åºçš„ main CK å…ƒä¿¡æ¯</strong></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">susan.c</span></code>ï¼šè¿™ä¸ªç¨‹åºçš„æºä»£ç </p></li>
</ul>
<p>å†è¯´ä¸€æ¬¡ï¼Œä¸è¦å¿˜è®°åœ¨æäº¤åˆ° Git æ—¶æ·»åŠ  <code class="docutils literal notranslate"><span class="pre">.cm</span></code> ç›®å½•ï¼Œå› ä¸º <code class="docutils literal notranslate"><span class="pre">.cm</span></code> æ–‡ä»¶åœ¨ Linux ä¸­çš„ bash ä¸­é€šå¸¸æ˜¯ä¸å¯è§çš„ï¼</p>
<p>å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç±»ä¼¼çš„ç¨‹åºï¼Œå¯ä»¥ä½¿ç”¨å…±äº«ç¨‹åºæ¨¡æ¿åˆ›å»ºä¸€ä¸ªæ–°çš„ç¨‹åºï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck add my-new-repo:program:my-new-program
</pre></div>
</div>
<p>ç„¶å CK ä¼šè¦æ±‚ä½ é€‰æ‹©æœ€æ¥è¿‘çš„æ¨¡æ¿ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">0</span><span class="o">)</span> C program <span class="s2">&quot;Hello world&quot;</span> <span class="o">(</span>--template<span class="o">=</span>template-hello-world-c<span class="o">)</span>
<span class="m">1</span><span class="o">)</span> C program <span class="s2">&quot;Hello world&quot;</span> with compile and run scripts <span class="o">(</span>--template<span class="o">=</span>template-hello-world-c-compile-run-via-scripts<span class="o">)</span>
<span class="m">2</span><span class="o">)</span> C program <span class="s2">&quot;Hello world&quot;</span> with jpeg dataset <span class="o">(</span>--template<span class="o">=</span>template-hello-world-c-jpeg-dataset<span class="o">)</span>
<span class="m">3</span><span class="o">)</span> C program <span class="s2">&quot;Hello world&quot;</span> with output validation <span class="o">(</span>--template<span class="o">=</span>template-hello-world-c-output-validation<span class="o">)</span>
<span class="m">4</span><span class="o">)</span> C program <span class="s2">&quot;Hello world&quot;</span> with xOpenME interface and pre/post processing <span class="o">(</span>--template<span class="o">=</span>template-hello-world-c-openme<span class="o">)</span>
<span class="m">5</span><span class="o">)</span> C++ TensorFlow classification example <span class="o">(</span>--template<span class="o">=</span>image-classification-tf-cpp<span class="o">)</span>
<span class="m">6</span><span class="o">)</span> C++ program <span class="s2">&quot;Hello world&quot;</span> <span class="o">(</span>--template<span class="o">=</span>template-hello-world-cxx<span class="o">)</span>
<span class="m">7</span><span class="o">)</span> Fortran program <span class="s2">&quot;Hello world&quot;</span> <span class="o">(</span>--template<span class="o">=</span>template-hello-world-fortran<span class="o">)</span>
<span class="m">8</span><span class="o">)</span> Java program <span class="s2">&quot;Hello world&quot;</span> <span class="o">(</span>--template<span class="o">=</span>template-hello-world-java<span class="o">)</span>
<span class="m">9</span><span class="o">)</span> Python MXNet image classification example <span class="o">(</span>--template<span class="o">=</span>mxnet<span class="o">)</span>
<span class="m">10</span><span class="o">)</span> Python TensorFlow classification example <span class="o">(</span>--template<span class="o">=</span>image-classification-tf-py<span class="o">)</span>
<span class="m">11</span><span class="o">)</span> Python program <span class="s2">&quot;Hello world&quot;</span> <span class="o">(</span>--template<span class="o">=</span>template-hello-world-python<span class="o">)</span>
<span class="m">12</span><span class="o">)</span> image-classification-tflite <span class="o">(</span>--template<span class="o">=</span>image-classification-tflite<span class="o">)</span>
<span class="m">13</span><span class="o">)</span> Empty entry
</pre></div>
</div>
<p>å¦‚æœä½ é€‰æ‹© â€œPython TensorFlow classification exampleâ€ï¼ŒCK å°†åœ¨ä½ çš„æ–°å­˜å‚¨åº“ä¸­åˆ›å»ºä¸€ä¸ªå¯ä»¥å·¥ä½œçš„å›¾åƒåˆ†ç±»ç¨‹åºï¼Œè¯¥ç¨‹åºçš„è½¯ä»¶ä¾èµ–äº TensorFlow AI æ¡†æ¶å’Œå…¼å®¹æ¨¡å‹ã€‚</p>
<p>å› ä¸ºå®ƒæ˜¯ä¸€ä¸ª Python ç¨‹åºï¼Œä½ ä¸éœ€è¦ç¼–è¯‘å®ƒï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck run program:my-new-program
</pre></div>
</div>
<p>è¯·æ³¨æ„ï¼Œç¨åæ‚¨å¯ä»¥å°†ä»¥ä¸‹é”®æ·»åŠ åˆ° <code class="docutils literal notranslate"><span class="pre">meta.json</span></code> æ–‡ä»¶ä¸­ï¼Œä»è€Œä½¿æ‚¨è‡ªå·±çš„ç¨‹åºæˆä¸ºæ¨¡æ¿æ–‡ä»¶ï¼š</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="nt">&quot;template&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;yes&quot;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="id4">
<h3>æ›´æ–°ç¨‹åºæºä»£ç <a class="headerlink" href="#id4" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>å¦‚æœæ‚¨å‘ç°ä¸€ä¸ªå…·æœ‰æ‰€æœ‰å¿…è¦çš„è½¯ä»¶ä¾èµ–é¡¹çš„ç±»ä¼¼ç¨‹åºï¼Œæ‚¨ç°åœ¨å¯ä»¥ä¸ºæ‚¨è‡ªå·±çš„ç¨‹åºæ›´æ–°æˆ–æ›´æ”¹å®ƒçš„æºä»£ç ã€‚</p>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¿…é¡»æ›´æ–° <code class="docutils literal notranslate"><span class="pre">meta.json</span></code> ä¸­çš„ä»¥ä¸‹é”®ï¼š</p>
<ul>
<li><p>æ·»åŠ æºæ–‡ä»¶ï¼š</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;source_files&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;susan.c&quot;</span>
<span class="p">],</span> 
</pre></div>
</div>
</li>
<li><p>æŒ‡å®šè¿è¡Œç¨‹åºçš„å‘½ä»¤è¡Œï¼ˆå‚è§ <code class="docutils literal notranslate"><span class="pre">run_cmd_main</span></code>ï¼‰ï¼š</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;run_cmds&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;corners&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;dataset_tags&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;image&quot;</span><span class="p">,</span> 
        <span class="s2">&quot;pgm&quot;</span><span class="p">,</span> 
        <span class="s2">&quot;dataset&quot;</span>
    <span class="p">],</span> 
    <span class="s2">&quot;ignore_return_code&quot;</span><span class="p">:</span> <span class="s2">&quot;no&quot;</span><span class="p">,</span> 
    <span class="s2">&quot;run_time&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;run_cmd_main&quot;</span><span class="p">:</span> <span class="s2">&quot;$#BIN_FILE#$ $#dataset_path#$$#dataset_filename#$ tmp-output.tmp -c&quot;</span> 
    <span class="p">}</span>
    <span class="p">},</span> 
    <span class="s2">&quot;edges&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;dataset_tags&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;image&quot;</span><span class="p">,</span> 
        <span class="s2">&quot;pgm&quot;</span><span class="p">,</span> 
        <span class="s2">&quot;dataset&quot;</span>
    <span class="p">],</span> 
    <span class="s2">&quot;ignore_return_code&quot;</span><span class="p">:</span> <span class="s2">&quot;no&quot;</span><span class="p">,</span> 
    <span class="s2">&quot;run_time&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;run_cmd_main&quot;</span><span class="p">:</span> <span class="s2">&quot;$#BIN_FILE#$ $#dataset_path#$$#dataset_filename#$ tmp-output.tmp -e&quot;</span> 
    <span class="p">}</span>
    <span class="p">},</span> 
</pre></div>
</div>
</li>
</ul>
<p>è¯·æ³¨æ„ï¼Œå¯ä»¥æœ‰å¤šä¸ªå¯èƒ½çš„å‘½ä»¤è¡Œæ¥è¿è¡Œè¿™ä¸ªç¨‹åºã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå½“ä½ è¿è¡Œè¿™ä¸ªç¨‹åºæ—¶ï¼ŒCK ä¼šé—®ä½ ä½¿ç”¨å“ªä¸€ä¸ªã€‚ä¾‹å¦‚ï¼Œè¿™å¯¹æ‰§è¡Œ ML æ¨¡å‹è®­ç»ƒï¼ˆâ€œè®­ç»ƒâ€ï¼‰ã€éªŒè¯ï¼ˆâ€œæµ‹è¯•â€ï¼‰å’Œåˆ†ç±»ï¼ˆâ€œåˆ†ç±»â€ï¼‰å¾ˆæœ‰ç”¨ã€‚</p>
<p>æ‚¨è¿˜å¯ä»¥æ›´æ–° <code class="docutils literal notranslate"> <span class="pre">meta.json</span></code> é”®å®šåˆ¶ç¨‹åºç¼–è¯‘å’Œæ‰§è¡Œï¼š</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;build_compiler_vars&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;XOPENME&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
  <span class="p">},</span> 

  <span class="s2">&quot;compiler_env&quot;</span><span class="p">:</span> <span class="s2">&quot;CK_CC&quot;</span><span class="p">,</span> 

  <span class="s2">&quot;extra_ld_vars&quot;</span><span class="p">:</span> <span class="s2">&quot;$&lt;&lt;CK_EXTRA_LIB_M&gt;&gt;$&quot;</span><span class="p">,</span> 

  <span class="s2">&quot;run_vars&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;CT_REPEAT_MAIN&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;NEW_VAR&quot;</span><span class="p">:</span><span class="s2">&quot;123&quot;</span>
  <span class="p">},</span> 
</pre></div>
</div>
<p>æ³¨æ„ï¼Œå½“ä½ åœ¨å‘½ä»¤è¡Œä¸­ä»¥ç»Ÿä¸€çš„æ–¹å¼è¿è¡Œä¸€ä¸ªç»™å®šçš„ç¨‹åºæ—¶ï¼Œä½ å¯ä»¥æ›´æ–°ç¯å¢ƒå˜é‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck run program:my-new-program --env.OMP_NUM_THREADS<span class="o">=</span><span class="m">4</span> --env.ML_MODEL<span class="o">=</span>mobilenet-v3
</pre></div>
</div>
<p>æ‚¨è¿˜å¯ä»¥é€šè¿‡ç¯å¢ƒæš´éœ²ä¸åŒçš„ç®—æ³•å‚æ•°å’Œä¼˜åŒ–ï¼Œä»¥åº”ç”¨å¯å®šåˆ¶çš„ CK è‡ªåŠ¨è°ƒä¼˜å™¨ï¼Œå¦‚åœ¨è¿™ä¸ª CK è¯·æ±‚å·¥ä½œæµä¸­ä½¿ç”¨çš„ï¼Œä»¥è‡ªåŠ¨æ¢ç´¢ï¼ˆååŒè®¾è®¡ï¼‰ä¸åŒçš„ MobileNets é…ç½®ï¼Œé€Ÿåº¦ï¼Œå‡†ç¡®æ€§å’Œæˆæœ¬ã€‚</p>
<p>ä¸‹é¢æ˜¯ CK ç¨‹åº <code class="docutils literal notranslate"><span class="pre">meta.json</span></code> ä¸­å…¶ä»–é‡è¦é”®çš„ç®€è¦æè¿°ï¼š</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;run_cmds&quot;</span><span class="p">:</span> <span class="p">{</span>                

    <span class="s2">&quot;corners&quot;</span><span class="p">:</span> <span class="p">{</span>               <span class="c1"># User key describing a given execution command line</span>

      <span class="s2">&quot;dataset_tags&quot;</span><span class="p">:</span> <span class="p">[</span>        <span class="c1"># dataset tags - will be used to query CK</span>
        <span class="s2">&quot;image&quot;</span><span class="p">,</span>               <span class="c1"># and automatically find related entries such as images</span>
        <span class="s2">&quot;pgm&quot;</span><span class="p">,</span> 
        <span class="s2">&quot;dataset&quot;</span>
      <span class="p">],</span> 

      <span class="s2">&quot;run_time&quot;</span><span class="p">:</span> <span class="p">{</span>            <span class="c1"># Next is the execution command line format</span>
                               <span class="c1"># $#BIN_FILE#$ will be automatically substituted with the compiled binary</span>
                               <span class="c1"># $#dataset_path#$$#dataset_filename#$ will be substituted with</span>
                               <span class="c1"># the first file from the CK dataset entry (see above example</span>
                               <span class="c1"># of adding new datasets to CK).</span>
                               <span class="c1"># tmp-output.tmp is and output file of a processed image.</span>
                               <span class="c1"># Basically, you can shuffle below words to set your own CMD</span>

        <span class="s2">&quot;run_cmd_main&quot;</span><span class="p">:</span> <span class="s2">&quot;$#BIN_FILE#$ $#dataset_path#$$#dataset_filename#$ tmp-output.tmp -c&quot;</span><span class="p">,</span> 

        <span class="s2">&quot;run_cmd_out1&quot;</span><span class="p">:</span> <span class="s2">&quot;tmp-output1.tmp&quot;</span><span class="p">,</span>  <span class="c1"># If !=&#39;&#39;, add redirection of the stdout to this file</span>
        <span class="s2">&quot;run_cmd_out2&quot;</span><span class="p">:</span> <span class="s2">&quot;tmp-output2.tmp&quot;</span><span class="p">,</span>  <span class="c1"># If !=&#39;&#39;, add redirection of the stderr to this file</span>

        <span class="s2">&quot;run_output_files&quot;</span><span class="p">:</span> <span class="p">[</span>               <span class="c1"># Lists files that are produced during</span>
                                            <span class="c1"># benchmark execution. Useful when program</span>
                                            <span class="c1"># is executed on remote device (such as</span>
                                            <span class="c1"># Android mobile) to pull necessary</span>
                                            <span class="c1"># files to host after execution</span>
          <span class="s2">&quot;tmp-output.tmp&quot;</span><span class="p">,</span> 
          <span class="s2">&quot;tmp-ck-timer.json&quot;</span>
        <span class="p">],</span>


        <span class="s2">&quot;run_correctness_output_files&quot;</span><span class="p">:</span> <span class="p">[</span>   <span class="c1"># List files that should be used to check</span>
                                            <span class="c1"># that program executed correctly.</span>
                                            <span class="c1"># For example, useful to check benchmark correctness</span>
                                            <span class="c1"># during automatic compiler/hardware bug detection</span>
          <span class="s2">&quot;tmp-output.tmp&quot;</span><span class="p">,</span> 
          <span class="s2">&quot;tmp-output2.tmp&quot;</span>
        <span class="p">],</span> 

        <span class="s2">&quot;fine_grain_timer_file&quot;</span><span class="p">:</span> <span class="s2">&quot;tmp-ck-timer.json&quot;</span>  <span class="c1"># If XOpenME library is used, it dumps run-time state</span>
                                                      <span class="c1"># and various run-time parameters (features) to tmp-ck-timer.json.</span>
                                                      <span class="c1"># This key lists JSON files to be added to unified </span>
                                                      <span class="c1"># JSON program workflow output</span>
      <span class="p">},</span>

      <span class="s2">&quot;hot_functions&quot;</span><span class="p">:</span> <span class="p">[</span>                 <span class="c1"># Specify hot functions of this program</span>
        <span class="p">{</span>                                <span class="c1"># to analyze only these functions during profiling</span>
          <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;susan_corners&quot;</span><span class="p">,</span>       <span class="c1"># or during standalone kernel extraction</span>
          <span class="s2">&quot;percent&quot;</span><span class="p">:</span> <span class="s2">&quot;95&quot;</span>                <span class="c1"># with run-time memory state (see &quot;codelets&quot;</span>
                                         <span class="c1">#  shared in CK repository from the MILEPOST project</span>
                                         <span class="c1">#  and our recent papers for more info)</span>
        <span class="p">}</span>
      <span class="p">]</span> 

      <span class="s2">&quot;ignore_return_code&quot;</span><span class="p">:</span> <span class="s2">&quot;no&quot;</span>         <span class="c1"># Some programs have return code &gt;0 even during</span>
                                         <span class="c1"># successful program execution. We use this return code</span>
                                         <span class="c1"># to check if benchmark failed particularly during</span>
                                         <span class="c1"># auto-tuning or compiler/hardware bug detection</span>
                                         <span class="c1">#  (when randomly or semi-randomly altering code,</span>
                                         <span class="c1">#   for example, see Grigori Fursin&#39;s PhD thesis with a technique</span>
                                         <span class="c1">#   to break assembler instructions to detect </span>
                                         <span class="c1">#   memory performance bugs) </span>
    <span class="p">},</span> 
    <span class="o">...</span>
  <span class="p">},</span> 
</pre></div>
</div>
<p>åœ¨ Student Cluster Competitionâ€™18 çš„<a class="reference external" href="https://github.com/ctuning/ck-scc18/blob/master/program/seissol-netcdf/.cm/meta.json">è¿™ä¸ªä¾‹å­</a>ä¸­ï¼Œæ‚¨è¿˜å¯ä»¥æ£€æŸ¥å¦‚ä½•åœ¨è¿è¡Œç¨‹åºä¹‹å‰å’Œä¹‹åä½¿ç”¨é¢„å¤„ç†å’Œåå¤„ç†è„šæœ¬ã€‚</p>
</div>
</div>
<div class="section" id="id5">
<h2>æ›´æ–°è½¯ä»¶ä¾èµ–<a class="headerlink" href="#id5" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>å¦‚æœä½ çš„æ–°ç¨‹åºä¾èµ–äºé¢å¤–çš„è½¯ä»¶ä¾èµ–ï¼ˆç¼–è¯‘å™¨ï¼Œåº“ï¼Œæ¨¡å‹ï¼Œæ•°æ®é›†ï¼‰ï¼Œä½ å¿…é¡»é¦–å…ˆåœ¨è½¯ä»¶æ£€æµ‹æ’ä»¶çš„åœ¨çº¿ç´¢å¼•ä¸­æ‰¾åˆ°ä½ éœ€è¦çš„é‚£äº›ã€‚ç„¶åï¼Œä½ å¯ä»¥åœ¨ <code class="docutils literal notranslate"> <span class="pre">meta.json</span></code> ä¸­ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">compile_deps</span></code> æˆ– <code class="docutils literal notranslate"><span class="pre">run_deps</span></code> é”®æ¥æŒ‡å®šæ ‡ç­¾å’Œç‰ˆæœ¬ï¼š</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="s2">&quot;compile_deps&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;compiler&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;local&quot;</span><span class="p">:</span> <span class="s2">&quot;yes&quot;</span><span class="p">,</span> 
      <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;C compiler&quot;</span><span class="p">,</span> 
      <span class="s2">&quot;sort&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> 
      <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="s2">&quot;compiler,lang-c&quot;</span>
    <span class="p">},</span> 
    <span class="s2">&quot;xopenme&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;local&quot;</span><span class="p">:</span> <span class="s2">&quot;yes&quot;</span><span class="p">,</span> 
      <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;xOpenME library&quot;</span><span class="p">,</span> 
      <span class="s2">&quot;sort&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> 
      <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="s2">&quot;lib,xopenme&quot;</span>
    <span class="p">}</span>
  <span class="p">},</span> 
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;run_deps&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;lib-tensorflow&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;local&quot;</span><span class="p">:</span> <span class="s2">&quot;yes&quot;</span><span class="p">,</span>
      <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;TensorFlow library&quot;</span><span class="p">,</span>
      <span class="s2">&quot;sort&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
      <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="s2">&quot;lib,tensorflow&quot;</span><span class="p">,</span>
      <span class="s2">&quot;no_tags&quot;</span><span class="p">:</span><span class="s2">&quot;vsrc&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;tensorflow-model&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;local&quot;</span><span class="p">:</span> <span class="s2">&quot;yes&quot;</span><span class="p">,</span>
      <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;TensorFlow model (net and weights)&quot;</span><span class="p">,</span>
      <span class="s2">&quot;sort&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
      <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="s2">&quot;tensorflowmodel,native&quot;</span>
    <span class="p">}</span>
  <span class="p">},</span>
</pre></div>
</div>
<p>æœ€ä½ï¼Œä½ åªéœ€è¦æ·»åŠ ä¸€ä¸ªæ–°çš„ sub-key å¦‚ â€œlib-tensorflowâ€ï¼Œä¸€ä¸ªç”¨æˆ·å‹å¥½çš„åç§°å¦‚ â€œTensorFlow libraryâ€ï¼Œä¸€ä¸ªæˆ–å¤šä¸ªæ ‡è®°æ¥æŒ‡å®šæ‚¨çš„è½¯ä»¶æ£€æµ‹æ’ä»¶ä»ä¸Šé¢æŒ‡æ•°ï¼ˆCKå°†ä½¿ç”¨è¿™äº›æ ‡ç­¾æ‰¾åˆ°ç›¸å…³CKç»„ä»¶ï¼‰å’Œä¸€ä¸ªé¡ºåºä¾èµ–å…³ç³»å¯ä»¥è§£å†³ä½¿ç”¨æ’åºé”®ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥ç”¨ä»¥ä¸‹é”®é€‰æ‹©ç‰ˆæœ¬èŒƒå›´ï¼š</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="s2">&quot;version_from&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">64</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="c1"># inclusive</span>
  <span class="s2">&quot;version_to&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">66</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>    <span class="c1"># exclusive</span>
</pre></div>
</div>
<p>çœ‹çœ‹ä¸€ä¸ª <a class="reference external" href="https://github.com/dividiti/ck-caffe/blob/master/package/lib-caffe-bvlc-master-cuda-universal/.cm/meta.json">æ›´å¤æ‚çš„ meta.json</a> çš„CUDA åŒ…ã€‚</p>
<p>æ¯å½“ CK ç¼–è¯‘æˆ–è¿è¡Œç¨‹åºæ—¶ï¼Œå®ƒé¦–å…ˆè‡ªåŠ¨è§£ææ‰€æœ‰çš„è½¯ä»¶ä¾èµ–å…³ç³»ã€‚CK è¿˜ä¼šç”¨è‡ªåŠ¨ç”Ÿæˆçš„ <code class="docutils literal notranslate"><span class="pre">env.sh</span></code> æˆ– <code class="docutils literal notranslate"><span class="pre">env.bat</span></code> æ‰¹å¤„ç†è„šæœ¬åœ¨ CK è™šæ‹Ÿç¯å¢ƒä¸­æ³¨å†Œæ‰€æœ‰æ£€æµ‹åˆ°çš„è½¯ä»¶æˆ–å®‰è£…çš„åŒ…ï¼ˆè¯·å‚è§<a class="reference external" href="http://localhost:8000/ai/ck/docs/_build/html/src/first-steps.html">å¼€å§‹æŒ‡å—</a>ï¼‰ã€‚ç„¶åï¼Œæ ¹æ®ä¸Šé¢çš„æ’åºé”®ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°åŠ è½½è¿™äº›è„šæœ¬ï¼Œä»¥èšåˆæ‰€æœ‰æ‰€éœ€çš„ç¯å¢ƒå˜é‡ï¼Œå¹¶å°†å®ƒä»¬ä¼ é€’ç»™ç¼–è¯‘æˆ–æ‰§è¡Œè„šæœ¬ã€‚ä½ çš„è„šæœ¬å’Œç®—æ³•å¯ä»¥ä½¿ç”¨æ‰€æœ‰è¿™äº›ç¯å¢ƒå˜é‡æ¥å®šåˆ¶ç¼–è¯‘å’Œæ‰§è¡Œï¼Œè€Œä¸éœ€è¦æ‰‹åŠ¨æ›´æ”¹è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ç”¨äº†å¯ç§»æ¤çš„å·¥ä½œæµï¼Œå¯ä»¥è‡ªåŠ¨é€‚åº”ç”¨æˆ·ç¯å¢ƒã€‚</p>
</div>
<div class="section" id="id6">
<h2>é‡ç”¨æˆ–æ·»åŠ åŸºæœ¬æ•°æ®é›†<a class="headerlink" href="#id6" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>åœ¨ CK å·¥ä½œæµä¸­å¼€å‘äº†ä¸€ç§ç®€å•çš„æœºåˆ¶æ¥é‡ç”¨åŸºæœ¬ï¼ˆå°ï¼‰æ•°æ®é›†ï¼Œä¾‹å¦‚å•ä¸ªå›¾åƒã€‚</p>
<p>æ‚¨å¯ä»¥ä½¿ç”¨æ­¤<a class="reference external" href="https://cknowledge.io/c/dataset">è”æœºç´¢å¼•</a>æ‰¾åˆ°å·²ç»å…±äº«çš„æ•°æ®é›†ã€‚</p>
<p>å¦‚æœæ‚¨æƒ³åœ¨æ‚¨çš„ç¨‹åºå·¥ä½œæµä¸­é‡ç”¨å®ƒä»¬ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°ç›¸å…³çš„ä¸€ä¸ªï¼Œæ£€æŸ¥å®ƒçš„æ ‡ç­¾ï¼ˆå‚è§ image-jpeg-0001 æ•°æ®é›†çš„ <a class="reference external" href="https://github.com/ctuning/ck-autotuning/blob/master/dataset/image-jpeg-fgg/.cm/meta.json">meta.json</a>ï¼‰ï¼Œå¹¶å°†å®ƒä»¬æ·»åŠ åˆ°æ‚¨çš„ç¨‹åºå…ƒæ•°æ®ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="s2">&quot;run_cmds&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;corners&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;dataset_tags&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;image&quot;</span><span class="p">,</span> 
        <span class="s2">&quot;pgm&quot;</span><span class="p">,</span> 
        <span class="s2">&quot;dataset&quot;</span>
      <span class="p">],</span> 
      <span class="s2">&quot;ignore_return_code&quot;</span><span class="p">:</span> <span class="s2">&quot;no&quot;</span><span class="p">,</span> 
      <span class="s2">&quot;run_time&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;run_cmd_main&quot;</span><span class="p">:</span> <span class="s2">&quot;$#BIN_FILE#$ $#dataset_path#$$#dataset_filename#$ tmp-output.tmp -c&quot;</span> 
      <span class="p">}</span>
    <span class="p">},</span> 
</pre></div>
</div>
<p>ç„¶åï¼ŒCK ä½¿ç”¨è¿™äº›æ ‡å¿—åœ¨æ‰€æœ‰è·å–çš„ CK å­˜å‚¨åº“ä¸­æœç´¢æ‰€æœ‰æ•°æ®é›†æ¡ç›®ï¼Œå½“å‘ç°å¤šä¸ªæ¡ç›®æ—¶ï¼Œä¼šè¯¢é—®ç”¨æˆ·ä½¿ç”¨å“ªä¸ªã€‚ç„¶å CK ä¼šå°† <code class="docutils literal notranslate"><span class="pre">$#dataset_path#$$#dataset_filename#$</span></code> æ›¿æ¢ä¸ºæ‰€é€‰æ¡ç›®ä¸­æ•°æ®é›†çš„å®Œæ•´è·¯å¾„å’Œæ–‡ä»¶ã€‚</p>
<p>è¿™ç§æ–¹æ³•å¯ä»¥åœ¨è½»æ¾å…±äº«å’Œé‡ç”¨ç›¸å…³æ•°æ®é›†çš„åŒæ—¶ï¼Œæ¶ˆé™¤ç‰¹æ®Šè„šæœ¬ä¸­çš„ç¡¬è¿æ¥è·¯å¾„ã€‚æ¯å½“ä½ æ‹‰ä¸€ä¸ªæ–°çš„å­˜å‚¨åº“ä¸ CK æ•°æ®é›†ï¼Œä»–ä»¬å¯ä»¥è¢«ä¸€ä¸ªç»™å®šçš„ç¨‹åºå·¥ä½œæµè‡ªåŠ¨æ‹¾å–ï¼</p>
<p>ä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨ä½ çš„ CK å­˜å‚¨åº“ä¸­çœ‹åˆ°æ‰€æœ‰ pgm å›¾åƒï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck pull repo:ctuning-datasets-min
ck search dataset --tags<span class="o">=</span>dataset,image,pgm
</pre></div>
</div>
<p>ä½ å¯ä»¥åœ¨ä½ çš„æ–°å­˜å‚¨åº“ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„æ•°æ®é›†ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck add my-new-repo:dataset:my-new-dataset
</pre></div>
</div>
<p>æ‚¨å°†è¢«è¦æ±‚è¾“å…¥ä¸€äº›æ ‡ç­¾ï¼Œå¹¶é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å°†è¢«å¤åˆ¶åˆ°æ–°çš„ CK æ¡ç›®ã€‚</p>
<p>æ³¨æ„ï¼Œå¯¹äºå¤§å‹å’Œå¤æ‚çš„æ•°æ®é›†ï¼Œå¦‚ ImageNetï¼Œæˆ‘ä»¬ä½¿ç”¨ CK åŒ…ï¼Œå®ƒå¯ä»¥ä¸‹è½½ç»™å®šçš„æ•°æ®é›†ï¼Œç”šè‡³å¯ä»¥æ ¹æ®å…¶ä»–è½¯ä»¶ä¾èµ–å…³ç³»å¤„ç†å®ƒã€‚ä¾‹å¦‚ï¼Œå½“ä½¿ç”¨ TensorFlow æˆ– PyTorch æˆ– MXNet æ—¶ï¼Œå¯èƒ½éœ€è¦ä¸€ä¸ªä¸åŒçš„è¿‡ç¨‹ã€‚</p>
</div>
<div class="section" id="id7">
<h2>æ·»åŠ æ–°çš„ CK è½¯ä»¶æ£€æµ‹æ’ä»¶<a class="headerlink" href="#id7" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>å¦‚æœ CK è½¯ä»¶æ’ä»¶å¯¹äºç»™å®šçš„ä»£ç ã€æ•°æ®æˆ–æ¨¡å‹ä¸å­˜åœ¨ï¼Œä½ å¯ä»¥åœ¨è‡ªå·±çš„å­˜å‚¨åº“æˆ–<a class="reference external" href="https://cknowledge.io/repos">å·²ç»å­˜åœ¨çš„å­˜å‚¨åº“</a>ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„ã€‚</p>
<p>æˆ‘ä»¬å»ºè®®ä½ ä½¿ç”¨è¿™ä¸ª<a class="reference external" href="http://cknowledge.io/soft">åœ¨çº¿ç´¢å¼•</a>æ‰¾åˆ°æœ€æ¥è¿‘çš„è½¯ä»¶æ£€æµ‹æ’ä»¶ï¼Œæ‹‰å‡ºè¿™ä¸ªåº“ï¼Œå¹¶åœ¨ä½ çš„åº“ä¸­å¤åˆ¶å¦‚ä¸‹ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck copy soft:lib.armcl my-new-repo:soft:lib.my-new-lib
</pre></div>
</div>
<p>æˆ–è€…</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck copy soft:dataset.imagenet.train my-new-repo:soft:my-new-data-set
</pre></div>
</div>
<p>æˆ–è€…ï¼Œä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªæ–°çš„è½¯æ¡ç›®ï¼Œå¹¶é€‰æ‹©æœ€ç›¸å…³çš„æ¨¡æ¿ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck add my-new-repo:soft:my-new-data-set
</pre></div>
</div>
<p>ç„¶åå¿…é¡»æ›´æ–° <code class="docutils literal notranslate"><span class="pre">.cm/meta.json</span></code> ä¸­çš„ç›¸å…³é”®ã€‚ä½ å¯ä»¥å‘ç°å¦‚ä¸‹ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck find soft:lib.my-new-lib
</pre></div>
</div>
<p>å…¸å‹è½¯ä»¶å…ƒæè¿°ï¼š</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;auto_detect&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;yes&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;customize&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;check_that_exists&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;yes&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;ck_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;env_prefix&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CK_ENV_LIB_ARMCL&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;limit_recursion_dir_search&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;linux&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;win&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;soft_file&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;linux&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;libarm_compute.a&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;win&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;arm_compute.lib&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;soft_path_example&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;soft_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ARM Compute Library&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;lib&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;arm&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;armcl&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;arm-compute-library&quot;</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>First, you must update <em>tags</em> keys for your new software,
<em>soft_name</em> to provide a user-friendly name for your software,
<em>env_prefix</em> to expose different environment variables
for the detected software in the automatically generated virtual environment script
(<em>env.sh</em> or <em>env.bat</em>), and <em>soft_file</em> keys to tell CK which unique filename inside this soft
to search for when detecting this software automatically on your system.</p>
<p>If the <em>soft_file</em> is the same across all platforms (Linux, Windows, MacOS, etc),
you can use the following universal key:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">&quot;soft_file_universal&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;libGL$#file_ext_dll#$&quot;</span><span class="p">,</span><span class="w"></span>
</pre></div>
</div>
<p>CK will then substitute <em>file_ext_dll</em> with <em>dll</em> key from the <em>file_extensions</em> dictionary
in the target OS (see example for the <a class="reference external" href="https://github.com/ctuning/ck-env/blob/master/os/linux-64/.cm/meta.json#L39">64-bit Linux</a>
and <a class="reference external" href="https://github.com/ctuning/ck-env/blob/master/os/windows-64/.cm/meta.json#L34">64-bit Windows</a>).</p>
<p>You can also tell CK to detect a given soft for a different target such as Android as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck detect soft:compiler.gcc.android.ndk --target_os<span class="o">=</span>android21-arm64
ck detect soft --tags<span class="o">=</span>compiler,android,ndk,llvm --target_os<span class="o">=</span>android21-arm64
</pre></div>
</div>
<p>Next, you may want to update the <a class="reference external" href="https://github.com/ctuning/ck-env/blob/master/soft/lib.armcl/customize.py">customize.py file</a> in the new entry.
This Python script can have multiple functions to customize the detection of a given software
and update different environment variables in the automatically generated â€œenv.shâ€ or â€œenv.batâ€
for the virtual CK environment.</p>
<p>For example, <em>setup</em> function receives a full path to a found software file specified using the above <em>soft_name</em> keys:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="n">cus</span><span class="o">=</span><span class="n">i</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;customize&#39;</span><span class="p">,{})</span>
    <span class="n">fp</span><span class="o">=</span><span class="n">cus</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;full_path&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>It is then used to prepare different environment variables with different paths (see <em>env</em> dictionary)
as well as embedding commands directly to â€œenv.shâ€ or â€œenv.batâ€ using â€œsâ€ string in the returned dictionary:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;return&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;bat&#39;</span><span class="p">:</span><span class="n">s</span><span class="p">}</span>
</pre></div>
</div>
<p>Here is an example of the automatically generated â€œenv.shâ€ on a user machine:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#! /bin/bash</span>
<span class="c1"># CK generated script</span>

<span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span> !<span class="o">=</span> <span class="s2">&quot;1&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$CK_ENV_LIB_ARMCL_SET</span><span class="s2">&quot;</span> <span class="o">==</span> <span class="s2">&quot;1&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="k">return</span><span class="p">;</span> <span class="k">fi</span><span class="p">;</span> <span class="k">fi</span>

<span class="c1"># Soft UOA           = lib.armcl (fc544df6941a5491)  (lib,arm,armcl,arm-compute-library,compiled-by-gcc,compiled-by-gcc-8.1.0,vopencl,vdefault,v18.05,v18,channel-stable,host-os-linux-64,tar</span>
get-os-linux-64,64bits,v18.5,v18.5.0<span class="o">)</span>
<span class="c1"># Host OS UOA        = linux-64 (4258b5fe54828a50)</span>
<span class="c1"># Target OS UOA      = linux-64 (4258b5fe54828a50)</span>
<span class="c1"># Target OS bits     = 64</span>
<span class="c1"># Tool version       = 18.05-b3a371b</span>
<span class="c1"># Tool split version = [18, 5, 0]</span>

<span class="c1"># Dependencies:</span>
. /home/fursin/CK/local/env/fd0d1d044f44c09b/env.sh
. /home/fursin/CK/local/env/72fa25bd445a993f/env.sh

<span class="nb">export</span> <span class="nv">CK_ENV_LIB_ARMCL_LIB</span><span class="o">=</span>/home/fursin/CK-TOOLS/lib-armcl-opencl-18.05-gcc-8.1.0-linux-64/install/lib
<span class="nb">export</span> <span class="nv">CK_ENV_LIB_ARMCL_INCLUDE</span><span class="o">=</span>/home/fursin/CK-TOOLS/lib-armcl-opencl-18.05-gcc-8.1.0-linux-64/install/include


<span class="nb">export</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="s2">&quot;/home/fursin/CK-TOOLS/lib-armcl-opencl-18.05-gcc-8.1.0-linux-64/install/lib&quot;</span>:<span class="nv">$LD_LIBRARY_PATH</span>
<span class="nb">export</span> <span class="nv">LIBRARY_PATH</span><span class="o">=</span><span class="s2">&quot;/home/fursin/CK-TOOLS/lib-armcl-opencl-18.05-gcc-8.1.0-linux-64/install/lib&quot;</span>:<span class="nv">$LIBRARY_PATH</span>

<span class="nb">export</span> <span class="nv">CK_ENV_LIB_ARMCL</span><span class="o">=</span>/home/fursin/CK-TOOLS/lib-armcl-opencl-18.05-gcc-8.1.0-linux-64/install
<span class="nb">export</span> <span class="nv">CK_ENV_LIB_ARMCL_CL_KERNELS</span><span class="o">=</span>/home/fursin/CK-TOOLS/lib-armcl-opencl-18.05-gcc-8.1.0-linux-64/src/src/core/CL/cl_kernels/
<span class="nb">export</span> <span class="nv">CK_ENV_LIB_ARMCL_DYNAMIC_CORE_NAME</span><span class="o">=</span>libarm_compute_core.so
<span class="nb">export</span> <span class="nv">CK_ENV_LIB_ARMCL_DYNAMIC_NAME</span><span class="o">=</span>libarm_compute.so
<span class="nb">export</span> <span class="nv">CK_ENV_LIB_ARMCL_LFLAG</span><span class="o">=</span>-larm_compute
<span class="nb">export</span> <span class="nv">CK_ENV_LIB_ARMCL_LFLAG_CORE</span><span class="o">=</span>-larm_compute_core
<span class="nb">export</span> <span class="nv">CK_ENV_LIB_ARMCL_SRC</span><span class="o">=</span>/home/fursin/CK-TOOLS/lib-armcl-opencl-18.05-gcc-8.1.0-linux-64/src
<span class="nb">export</span> <span class="nv">CK_ENV_LIB_ARMCL_SRC_INCLUDE</span><span class="o">=</span>/home/fursin/CK-TOOLS/lib-armcl-opencl-18.05-gcc-8.1.0-linux-64/src/include
<span class="nb">export</span> <span class="nv">CK_ENV_LIB_ARMCL_STATIC_CORE_NAME</span><span class="o">=</span>libarm_compute_core.a
<span class="nb">export</span> <span class="nv">CK_ENV_LIB_ARMCL_STATIC_NAME</span><span class="o">=</span>libarm_compute.a
<span class="nb">export</span> <span class="nv">CK_ENV_LIB_ARMCL_TESTS</span><span class="o">=</span>/home/fursin/CK-TOOLS/lib-armcl-opencl-18.05-gcc-8.1.0-linux-64/src/tests
<span class="nb">export</span> <span class="nv">CK_ENV_LIB_ARMCL_UTILS</span><span class="o">=</span>/home/fursin/CK-TOOLS/lib-armcl-opencl-18.05-gcc-8.1.0-linux-64/src/utils

<span class="nb">export</span> <span class="nv">CK_ENV_LIB_ARMCL_SET</span><span class="o">=</span><span class="m">1</span>
</pre></div>
</div>
<p>All these environment variables will be exposed to the CK program compilation and execution workflow
if this software dependency is seleted in a program meta description.</p>
<p>You can also look at how this functionality is implemented in the <a class="reference external" href="https://github.com/ctuning/ck-env/blob/master/module/soft/module.py">CK soft module</a>.</p>
<p>There are many options and nuances so we suggest you to have a look
at existing examples or contact <a class="reference external" href="https://cKnowledge.org/contacts.html">the CK community</a> for further details.
We regularly explain users how to add new software detection plugins and packages.</p>
</div>
<div class="section" id="add-new-ck-packages">
<h2>Add new CK packages<a class="headerlink" href="#add-new-ck-packages" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>Whenever a required software is not found, CK will automatically search
for existing packages with the same tags for a given target
in all installed CK repositories.</p>
<p><a class="reference external" href="https://cKnowledge.io/c/module/package">CK package module</a> provides a unified JSON API
to automatically download, install, and potentially rebuild a given package
(software, datasets, models, etc) in a portable way across Linux, Windows, MacOS, Android,
and other supported platforms. It is also a unified front-end for other
package managers and build tools including make, cmake, scons, Spack, EasyBuild, etc.</p>
<p>If CK packages are not found, CK will print notes from the <em>install.txt</em> file
from a related software detection plugin about how to download and install such package manually
as shown in this <a class="reference external" href="https://github.com/ctuning/ck-env/blob/master/soft/compiler.cuda/install.txt">example</a>
for CUDA.</p>
<p>In such case, you may be interested to provide a new CK package to be reused either in your workgroup
or by the broad community to automate the installation.</p>
<p>Similar to adding CK software detection plugins, you must first find the most close package
from this <a class="reference external" href="https://cKnowledge.io/packages">online index</a>, download it,
and make a new copy in your repository unless you want to share it immediately with the community
in already <a class="reference external" href="https://cKnowledge.io/repos">existing CK repositories</a>.</p>
<p>For example, letâ€™s copy a CK protobuf package that downloads a given protobuf version in a tgz archive
and uses cmake to build it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck cp package:lib-protobuf-3.5.1-host my-new-repo:package:my-new-lib
</pre></div>
</div>
<p>Note, that all CK packages must be always connected with some software detection plugins
such as â€œsoft:lib.my-new-libâ€ created in the previous section.
You just need to find its Unique ID as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck info soft:lib.my-new-lib
</pre></div>
</div>
<p>and add it to the <em>soft_uoa</em> key in the package <em>meta.json</em>.</p>
<p>Next, copy/paste <em>the same</em> tags from the <em>meta.json</em> of the soft plugin
to the <em>meta.json</em> of the package and add extra tags specifying a version.
See examples of such tags in existing packages
such as <a class="reference external" href="https://github.com/ctuning/ck-math/blob/master/package/lib-armcl-opencl-18.05/.cm/meta.json">lib-armcl-opencl-18.05</a>
and <a class="reference external" href="https://github.com/ctuning/ck-env/blob/master/package/compiler-llvm-10.0.0-universal/.cm/meta.json">compiler-llvm-10.0.0-universal</a>.</p>
<p>Alternatively, you can add a new CK package using existing templates
while specifying a related software plugin in the command line as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck add my-new-repo:package:my-new-lib --soft<span class="o">=</span>lib.my-new-lib
</pre></div>
</div>
<p>In such case, CK will automatically substitute correct values for <em>soft_uoa</em> and <em>tags</em> keys!</p>
<p>Next, you need to update the <em>.cm/meta.json</em> file in the new CK package entry:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck find package:my-new-lib
</pre></div>
</div>
<p>For example, you need to update other keys in the package meta.json
to customize downloading and potentially building (building is not strictly required
when you download datasets, models, and other binary packages):</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="w">   </span><span class="nt">&quot;install_env&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;CMAKE_CONFIG&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Release&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;PACKAGE_AUTOGEN&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NO&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;PACKAGE_BUILD_TYPE&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cmake&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;PACKAGE_CONFIGURE_FLAGS&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;-Dprotobuf_BUILD_TESTS=OFF&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;PACKAGE_CONFIGURE_FLAGS_LINUX&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;-DCMAKE_INSTALL_LIBDIR=lib&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;PACKAGE_CONFIGURE_FLAGS_WINDOWS&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;-DBUILD_SHARED_LIBS=OFF -Dprotobuf_MSVC_STATIC_RUNTIME=OFF&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;PACKAGE_FLAGS_LINUX&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;-fPIC&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;PACKAGE_NAME&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;v3.5.1.tar.gz&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;PACKAGE_NAME1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;v3.5.1.tar&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;PACKAGE_NAME2&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;v3.5.1&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;PACKAGE_RENAME&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;YES&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;PACKAGE_SUB_DIR&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;protobuf-3.5.1&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;PACKAGE_SUB_DIR1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;protobuf-3.5.1/cmake&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;PACKAGE_UNGZIP&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;YES&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;PACKAGE_UNTAR&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;YES&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;PACKAGE_UNTAR_SKIP_ERROR_WIN&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;YES&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;PACKAGE_URL&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://github.com/google/protobuf/archive&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;PACKAGE_WGET&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;YES&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;3.5.1&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>You can specify extra software dependencies using <em>deps</em> dictionary if needed.</p>
<p>You must also describe the file which will be downloaded or created at the end of
the package installation process using <em>end_full_path</em> key to let CK validate
that the process was successful:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">&quot;end_full_path&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;linux&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;install$#sep#$lib$#sep#$libprotobuf.a&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;win&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;install\\lib\\libprotobuf.lib&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>You can add or update a script to download and build a given package. See examples of such scripts in
CK package <em>imagenet-2012-aux</em>: <span class="xref myst">install.sh</span>
and <a class="reference external" href="https://github.com/ctuning/ck-env/blob/master/package/imagenet-2012-aux/install.bat">install.bat</a>
to download ImageNet 2012 auxiliary dataset used in the <a class="reference external" href="https://cKnowledge.org/request">ACM ReQuEST-ASPLOS tournament</a>
and <a class="reference external" href="https://github.com/ctuning/ck-mlperf">MLPerfâ„¢ submissions</a>.</p>
<p>Note that CK will pass at least 2 environment variables to this script:</p>
<ul class="simple">
<li><p><em>PACKAGE_DIR</em> - the path to the CK package entry. This is useful if your script need additional files or subscripts from the CK package entry.</p></li>
<li><p><em>INSTALL_DIR</em> - the path where this package will be installed. Note that <em>end_full_path</em> key will be appended to this path.</p></li>
</ul>
<p>If you need to know extra CK variables passed to this script,
you can just export all environment variable to some file
and check the ones starting from <em>CK_</em>.</p>
<p>For example, if your package has software dependencies on a specific Python version,
all environment variables from the resolved software dependencies will be available
in your installation script. This allows you to use the <em>${CK_ENV_COMPILER_PYTHON_FILE}</em>
environment variable instead of calling python directly to be able to automatically
adapt to different python versions on your machine.</p>
<p>At the end of the package installation, CK will check if this file was created,
and will pass it to the related software detection plugin to register the CK virtual environment,
thus fully automating the process of rebuilding the required environment
for a given workflow!</p>
<p>If you need to create a simple package that downloads an archive, uses <em>configure</em> to configure it,
and builds it using <em>make</em>, use this <a class="reference external" href="https://github.com/ctuning/ck-env/tree/master/package/lib-openmpi-1.10.3-universal">lib-openmpi-1.10.3-universal CK package</a>
as example:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="nt">&quot;PACKAGE_URL&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://www.open-mpi.org/software/ompi/v1.10/downloads&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w"> </span><span class="nt">&quot;PACKAGE_NAME&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;openmpi-1.10.3.tar.gz&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w"> </span><span class="nt">&quot;PACKAGE_NAME1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;openmpi-1.10.3.tar&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w"> </span><span class="nt">&quot;PACKAGE_NAME2&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;openmpi-1.10.3&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w"> </span><span class="nt">&quot;PACKAGE_SUB_DIR&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;openmpi-1.10.3&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w"> </span><span class="nt">&quot;PACKAGE_SUB_DIR1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;openmpi-1.10.3&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w"> </span><span class="nt">&quot;linux&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;install/lib/libmpi.so&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>Note that we described only a small part of all available functions of
the CK package manager that we have developed in collaboration with our [http://cKnowledge.org/partners.html partners and users].
We continue documenting them and started working on a user-friendly GUI
to add new software and packages via web. You can try it <a class="reference external" href="https://cknowledge.io/add-artifact">here</a>.</p>
</div>
<div class="section" id="pack-ck-repository">
<h2>Pack CK repository<a class="headerlink" href="#pack-ck-repository" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>You can pack a given repository as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck zip repo:my-new-repo
</pre></div>
</div>
<p>This command will create a <em>ckr-my-new-repo.zip</em> file that you can archive or send to your colleagues and <a class="reference external" href="https://cTuning.org/ae">artifact evaluators</a>.</p>
<p>Other colleagues can then download it and install it on their system as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck add repo --zip<span class="o">=</span>ckr-my-new-repo.zip
</pre></div>
</div>
<p>They can also unzip entries to an existing repository (local by default) as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ck</span> <span class="n">unzip</span> <span class="n">repo</span> <span class="o">--</span><span class="nb">zip</span><span class="o">=</span><span class="n">ckr</span><span class="o">-</span><span class="n">my</span><span class="o">-</span><span class="n">new</span><span class="o">-</span><span class="n">repo</span><span class="o">.</span><span class="n">zip</span>
</pre></div>
</div>
<p>This enables a simple mechanism to share repositories, automation actions, and components
including experimental results and reproducible papers with the community.
We also hope it will help to automate the <a class="reference external" href="https://cTuning.org/ae">tedious Artifact Evaluation process</a>.</p>
</div>
<div class="section" id="prepare-ck-repository-for-digital-libraries">
<h2>Prepare CK repository for Digital Libraries<a class="headerlink" href="#prepare-ck-repository-for-digital-libraries" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>During the <a class="reference external" href="https://cKnowledge.org/request">ACM ReQuEST-ASPLOSâ€™18 tournament</a>
the authors needed to share the snapshots of their implementations of efficient deep learning algorithms
for the ACM Digital Library.</p>
<p>We have added a new automation to the CK to prepare such snapshots
of a given repository with all dependencies and the latest CK framework in one zip file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck snapshot artifact --repo<span class="o">=</span>my-new-repo
</pre></div>
</div>
<p>It will create a <em>ck-artifacts-{date}.zip</em> archive with all related CK repositories, the CK framework, and two scripts:</p>
<ul class="simple">
<li><p><em>prepare_virtual_ck.bat</em></p></li>
<li><p><em>run_virtual_ck.bat</em></p></li>
</ul>
<p>The first script will unzip all CK repositories and the CK framework inside your current directory.</p>
<p>The second script will set environment variables to point to above CK repositories in such a way
that it will not influence you existing CK installation! Basically it creates a virtual CK environment
for a given CK snapshot. At the end, this script will run <em>bash</em> on Linux/MacOS or <em>cmd</em> on Windows
allowing you to run CK commands to prepare, run, and validate a given CK workflow
while adapting to your platform and environment!</p>
</div>
<div class="section" id="prepare-a-docker-container-with-ck-workflows">
<h2>Prepare a Docker container with CK workflows<a class="headerlink" href="#prepare-a-docker-container-with-ck-workflows" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>One of the CK goals is to be a plug&amp;play connector between non-portable workflows and containers.</p>
<p>CK can work both in native environments and containers. While portable CK workflows can fail
in the latest environment, they will work fine inside a container with a stable environment.</p>
<p>We have added the CK module <a class="reference external" href="https://cKnowledge.io/c/module/docker"><em>docker</em></a>
to make it easier to build, share, and run Docker descriptions.
Please follow the Readme in the <a class="reference external" href="https://github.com/ctuning/ck-docker">ck-docker</a> for more details.</p>
<p>Please check examples of the CK Docker entries with CK workflows and components in the following projects:</p>
<ul class="simple">
<li><p>https://github.com/ctuning/ck-mlperf/tree/master/docker</p></li>
<li><p>https://github.com/ctuning/ck-request-asplos18-caffe-intel/tree/master/docker</p></li>
<li><p>https://github.com/ctuning/ck-docker/tree/master/docker</p></li>
</ul>
<p>You can find many of these containers ready for deployment, usage, and further customization
at the <a class="reference external" href="https://hub.docker.com/u/ctuning">cTuning Docker hub</a>.</p>
</div>
<div class="section" id="create-more-complex-workflows">
<h2>Create more complex workflows<a class="headerlink" href="#create-more-complex-workflows" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>Users can create even more complex CK workflows that will automatically compile, run, and validate
multiple applications with different compilers, datasets, and models across different platforms
while sharing, visualizing, and comparing experimental results via live scoreboards.</p>
<p>See the following examples:</p>
<ul class="simple">
<li><p>https://cKnowledge.org/rpi-crowd-tuning</p></li>
<li><p>https://github.com/SamAinsworth/reproduce-cgo2017-paper (see <a class="reference external" href="https://github.com/SamAinsworth/reproduce-cgo2017-paper/blob/master/module/workflow-from-cgo2017-paper/module.py">CK workflow module</a>)</p></li>
<li><p>https://github.com/ctuning/ck-scc18/wiki</p></li>
<li><p>https://github.com/ctuning/ck-scc</p></li>
<li><p>https://github.com/ctuning/ck-request-asplos18-results</p></li>
</ul>
<p>Users can create such workflows using two methods:</p>
<div class="section" id="using-shell-scripts">
<h3>Using shell scripts<a class="headerlink" href="#using-shell-scripts" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>We have added CK module <em>script</em> that allows you to add a CK entry
where you can store different system scripts. Such scripts can call
different CK modules to install packages, build and run programs,
prepare interactive graphs, generate papers, etc.</p>
<p>You can see examples of such scripts from the <a class="reference external" href="https://github.com/SamAinsworth/reproduce-cgo2017-paper/tree/master/script/reproduce-cgo2017-paper">reproducible CGOâ€™17 paper</a>.
You can also check this <a class="reference external" href="https://www.cl.cam.ac.uk/~sa614/papers/Software-Prefetching-CGO2017.pdf">unified Artifact Appendix and reproducibility checklist</a>
at the end of this article describing how to run those scripts.</p>
<p>You can add your own CK script entry as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span> $ ck add my-new-repo:script:my-scripts-to-run-experiments
 $ ck add my-new-repo:script:my-scripts-to-generate-articles
</pre></div>
</div>
<p>You can also write Python scripts calling CK APIs directly.
For example, check <a class="reference external" href="https://github.com/dividiti/ck-request-asplos18-mobilenets-armcl-opencl/blob/master/script/mobilenets-tensorflow/benchmark.py">this ReQuEST-ASPLOSâ€™18 benchmark script</a>
to prepare, run, and customize <a class="reference external" href="https://cKnowledge.org/request">ACM REQUEST</a> experiments:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#! /usr/bin/python</span>

import ck.kernel as ck
import os

...

def <span class="k">do</span><span class="o">(</span>i, arg<span class="o">)</span>:

    <span class="c1"># Process arguments.</span>
    <span class="k">if</span> <span class="o">(</span>arg.accuracy<span class="o">)</span>:
        <span class="nv">experiment_type</span> <span class="o">=</span> <span class="s1">&#39;accuracy&#39;</span>
        <span class="nv">num_repetitions</span> <span class="o">=</span> <span class="m">1</span>
    <span class="k">else</span>:
        <span class="nv">experiment_type</span> <span class="o">=</span> <span class="s1">&#39;performance&#39;</span>
        <span class="nv">num_repetitions</span> <span class="o">=</span> arg.repetitions

    <span class="nv">random_name</span> <span class="o">=</span> arg.random_name
    <span class="nv">share_platform</span> <span class="o">=</span> arg.share_platform

    <span class="c1"># Detect basic platform info.</span>
    <span class="nv">ii</span><span class="o">={</span><span class="s1">&#39;action&#39;</span>:<span class="s1">&#39;detect&#39;</span>,
        <span class="s1">&#39;module_uoa&#39;</span>:<span class="s1">&#39;platform&#39;</span>,
        <span class="s1">&#39;out&#39;</span>:<span class="s1">&#39;con&#39;</span><span class="o">}</span>
    <span class="k">if</span> share_platform: ii<span class="o">[</span><span class="s1">&#39;exchange&#39;</span><span class="o">]=</span><span class="s1">&#39;yes&#39;</span>
    <span class="nv">r</span><span class="o">=</span>ck.access<span class="o">(</span>ii<span class="o">)</span>
    <span class="k">if</span> r<span class="o">[</span><span class="s1">&#39;return&#39;</span><span class="o">]</span>&gt;0: <span class="k">return</span> r

...
</pre></div>
</div>
</div>
<div class="section" id="using-ck-modules">
<h3>Using CK modules<a class="headerlink" href="#using-ck-modules" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>You can also add and use any new module â€œworkflow.my-new-experimentsâ€ as a workflow
with different functions to prepare, run, and validate experiments.
This is the preferred method that allows you to use unified CK APIs
and reuse this module in other projects:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck add my-new-repo:module:workflow.my-new-experiments
</pre></div>
</div>
<p>Note, that CK module and entry names are global in the CK. Therefore, we suggest you to find a unique name.</p>
<p>You can then add any function to this workflow. For example, letâ€™s add a function â€œrunâ€ to run your workflow:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck add_action my-new-repo:module:workflow.my-new-experiments --func<span class="o">=</span>run
</pre></div>
</div>
<p>CK will create a working dummy function in the python code of this CK module that you can test immediately:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck run workflow.my-new-experiments
</pre></div>
</div>
<p>You can then find the <em>module.py</em> from this CK module and update <em>run</em> function to implement your workflow:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ck find module:workflow.my-new-experiments
<span class="nb">cd</span> <span class="sb">`</span>ck find module:workflow.my-new-experiments<span class="sb">`</span>
ls *.py
</pre></div>
</div>
<p>Donâ€™t hesitate to get in touch with the [[Contacts|CK community]] if you have questions or comments.</p>
</div>
</div>
<div class="section" id="generate-reproducible-and-interactive-articles">
<h2>Generate reproducible and interactive articles<a class="headerlink" href="#generate-reproducible-and-interactive-articles" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>Unified CK APIs and portable CK workflows can help to automate all experiments as well as
the generation of papers with all tables and graphs.</p>
<p>As a proof-of-concept, we collaborated with the <a class="reference external" href="https://www.raspberrypi.org">Raspberry Pi foundation</a>
to reproduce results from the <a class="reference external" href="https://en.wikipedia.org/wiki/MILEPOST_GCC">MILEPOST project</a>
and develop a Collective Knowledge workflow for collaborative research into multi-objective autotuning
and machine learning techniques.</p>
<p>We have developed a <a class="reference external" href="https://github.com/ctuning/reproduce-milepost-project">MILEPOST GCC workflow</a>,
shared results in the <a class="reference external" href="https://github.com/ctuning/ck-rpi-optimization-results">CK repository</a>,
created <a class="reference external" href="https://cKnowledge.org/repo-beta">live CK dashboards to crowdsource autotuning</a>,
and automatically generated a <a class="reference external" href="https://cKnowledge.org/rpi-crowd-tuning">live and interactive article</a>
where results can be automatically updated by the community. The stable snapshot of such article
can still be published as a <a class="reference external" href="https://arxiv.org/abs/1801.08024">traditional PDF paper</a>.</p>
<p>However, it is still a complex process. We have started documenting this functionality <a class="reference external" href="https://github.com/ctuning/ck/wiki/Interactive-articles">here</a>
and plan to gradually improve it. When we have more resources, we plan to add a web-based GUI to the <a class="reference external" href="https://cKnowledge.io">cKnowledge.io platform</a>
to make it easier to create such live, reproducible, and interactive articles.</p>
</div>
<div class="section" id="publish-ck-repositories-workflows-and-components">
<h2>Publish CK repositories, workflows, and components<a class="headerlink" href="#publish-ck-repositories-workflows-and-components" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>We are developing an open <a class="reference external" href="https://cKnowledge.io">cKnowledge.io platform</a> to let users
share and reuse CK repositories, workflows, and components similar to PyPI.
Please follow <a class="reference external" href="https://cKnowledge.io/docs">this guide</a> to know more.</p>
</div>
<div class="section" id="contact-the-ck-community">
<h2>Contact the CK community<a class="headerlink" href="#contact-the-ck-community" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>We continue improving the CK technology, components, automation actions, workflows, and this documentation!
If you have questions, encounter problems or have some feedback,
do not hesitate to <a class="reference external" href="https://cKnowledge.org/contacts.html">contact us</a>!</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "xinetzone/ck-book",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./start"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>
<div class="section">
   
</div>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="first-steps.html" title="ä¸Šä¸€é¡µ é¡µ">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">ä¸Šä¸€é¡µ</p>
            <p class="prev-next-title">å°è¯• CK</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="commands.html" title="ä¸‹ä¸€é¡µ é¡µ">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">ä¸‹ä¸€é¡µ</p>
        <p class="prev-next-title">CK CLI å’Œ API</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      é€šè¿‡ xinetzone<br/>
    
        &copy; ç‰ˆæƒ 2021, xinetzone.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>